<html>

<head>
  <title>Migration Guide for Sapphire 0.3</title>
  <link rel="StyleSheet" href="../../style.css" TYPE="text/css"/>
  <style type="text/css">
    pre.source-code 
    {
      font-family: Andale Mono, Lucida Console, Monaco, fixed, monospace; 
      color: #000000;
      background-color: #ffffff;
      font-size: 12px;
      border: 0px;
      line-height: 14px;
      padding: 5px;
      margin-left: 0px;
      margin-right: 0px;
      overflow: auto
    }
</style></head>

<body>

<h1>Migration Guide for 0.3</h1>

<p>This documents covers code changes that need to be made by Sapphire adopters as part of migrating 
to 0.3 release. Only changes from the previous milestone are covered.</p>

<p>Table of Contents</p>

<ol>
  <li><a href="#modularity">Modularity Changes</a></li>
  <li><a href="#ref">ReferenceValue Changes</a></li>
  <li><a href="#services">Services</a></li>
  <li><a href="#validation">Validation</a></li>
  <li><a href="#java">Java Support</a></li>
  <li><a href="#html">HTML Content Presentation</a></li>
  <li><a href="#related-content">Related Content</a></li>
  <li><a href="#composite-ref">Composite Reference</a></li>
  <li><a href="#section-description">Section Description</a></li>
  <li><a href="#function">Function Name Method</a></li>
  <li><a href="#with">With Directive</a></li>
  <li><a href="#element-image">Model Element Image</a></li>
  <li><a href="#required-annotation">Required Annotation</a></li>
  <li><a href="#master-details-content-node-factory">Master Details Content Node Factory</a></li>
</ol>

<h2><a name="modularity">Modularity Changes</a></h2>

<p>The contents of some bundles have changes and several new bundles have been created. These changes
may require adopters to modify Requite-Bundle declarations and import statements.</p>

<table>
  <tr>
    <th>Old Bundle</th>
    <th>Old Classes</th>
    <th>New Bundle</th>
    <th>New Classes</th>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code>org.eclipse.sapphire.modeling</code></pre>
    </td>
    <td>
<pre class="source-code"><code>org.eclipse.sapphire.modeling.xml.*<br/>org.eclipse.sapphire.modeling.xml.annotations.*<br/>org.eclipse.sapphire.modeling.xml.schema.*</code></pre>
    </td>
    <td>
<pre class="source-code"><code>org.eclipse.sapphire.modeling.xml</code></pre>
    </td>
    <td>
<pre class="source-code"><code>unchanged</code></pre>
    </td>
  </tr>
    <td>
<pre class="source-code"><code>org.eclipse.sapphire.modeling</code></pre>
    </td>
    <td>
<pre class="source-code"><code>org.eclipse.sapphire.modeling.java.*</code></pre>
    </td>
    <td>
<pre class="source-code"><code>org.eclipse.sapphire.java</code></pre>
    </td>
    <td>
<pre class="source-code"><code>org.eclipse.sapphire.java.*</code></pre>
    </td>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code>org.eclipse.sapphire.modeling</code></pre>
    </td>
    <td>
<pre class="source-code"><code>org.eclipse.sapphire.modeling.WorkspaceFileResourceStore</code></pre>
    </td>
    <td>
<pre class="source-code"><code>org.eclipse.sapphire.workspace</code></pre>
    </td>
    <td>
<pre class="source-code"><code>org.eclipse.sapphire.workspace.WorkspaceFileResourceStore</code></pre>
    </td>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code>org.eclipse.sapphire.modeling</code></pre>
    </td>
    <td>
<pre class="source-code"><code>org.eclipse.sapphire.modeling.annotations.EclipseWorkspacePath</code></pre>
    </td>
    <td>
<pre class="source-code"><code>org.eclipse.sapphire.workspace</code></pre>
    </td>
    <td>
<pre class="source-code"><code>org.eclipse.sapphire.workspace.WorkspaceRelativePath</code></pre>
    </td>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code>org.eclipse.sapphire.ui</code></pre>
    </td>
    <td>
<pre class="source-code"><code>org.eclipse.sapphire.ui.xml.*</code></pre>
    </td>
    <td>
<pre class="source-code"><code>org.eclipse.sapphire.ui.swt.xml.editor</code></pre>
    </td>
    <td>
<pre class="source-code"><code>org.eclipse.sapphire.ui.swt.xml.editor.*</code></pre>
    </td>
  </tr>
</table>

<h2><a name="ref">ReferenceValue Changes</a></h2>

<p>The ReferenceValue class now takes two type parameters instead of one. The first is the 
type of the reference. This used to be assumed to always be a string. The second is the type 
of what the reference resolves to.</p>

<table>
  <tr>
    <th>Before</th>
    <th>After</th>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code>ReferenceValue&lt;ImageDescriptor> getImage();</code></pre>
    </td>
    <td>
<pre class="source-code"><code>ReferenceValue&lt;String,ImageDescriptor> getImage();</code></pre>
    </td>
  </tr>
</table>

<h2><a name="services">Services</a></h2>

<p>A few changes have been made to the services API.</p>

<table>
  <tr>
    <th>Before</th>
    <th>After</th>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code>public class MyService extends ModelElementService
{
    public void init( final IModelElement element )
    {
        super.init( element );

        ...
    }
}</code></pre>
    </td>
    <td>
<pre class="source-code"><code>public class MyService extends ModelElementService
{
    public void init( final IModelElement element,
                      final String[] params )
    {
        super.init( element, params );

        ...
    }
}</code></pre>
    </td>
  </tr>
</table>

<h2><a name="validation">Validation</a></h2>

<p>Validators are now model element services. They can be registered globaly via the extension
system or at the level of an individual property using the @Service annotation.</p>

<table>
  <tr>
    <th>Before</th>
    <th>After</th>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code>@Validator( service = MyValidator.class )</code></pre>
    </td>
    <td>
<pre class="source-code"><code>@Service( impl = MyValidationService.class )</code></pre>
    </td>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code>@Validators
(
    @Validator( impl = MyValidator1.class ),
    @Validator( impl = MyValidator2.class )
)</code></pre>
    </td>
    <td>
<pre class="source-code"><code>@Services
(
    @Service( impl = MyValidationService1.class ),
    @Service( impl = MyValidationService2.class )
)</code></pre>
    </td>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code>public class CustomValidator extends ModelPropertyValidator&lt;Value&lt;?>>
{
    @Override
    public void init( String[] params )
    {
        ...
    }
    
    public IStatus validate( Value&lt;?> value )
    {
        ...
    }
}</code></pre>
    </td>
    <td>
<pre class="source-code"><code>public class CustomValidationService extends ModelPropertyValidationService&lt;Value&lt;?>>
{
    @Override
    public void init( IModelElement element,
                      ModelProperty property,
                      String[] params )
    {
        ...
    }
    
    public IStatus validate()
    {
        final Value&lt;?> value = target();

        ...
    }
}</code></pre>
    </td>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code>@Validator( impl = UniqueValueValidator.class )</code></pre>
    </td>
    <td>
<pre class="source-code"><code>@NoDuplicates</code></pre>
    </td>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code>public class CustomValidator extends UniqueValueValidator
{
    ...
}</code></pre>
    </td>
    <td>
<pre class="source-code"><code>public class CustomValidationService extends UniqueValueValidationService
{
    ...
}</code></pre>
    </td>
  </tr>
</table>

<h2><a name="java">Java Support</a></h2>

<p>Support for writing models that reference Java types has been improved. All properties that that hold
Java type names should now be modeled as a reference from JavaTypeName to JavaType in order to receive validation
and content assist support.</p>

<table>
  <tr>
    <th>Before</th>
    <th>After</th>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code><font color="#888888">@Type( base = JavaTypeName.class )</font>
@JavaTypeConstraint<u>s</u>( ... )
<font color="#888888">@MustExist
    
ValueProperty PROP_IMPL_CLASS = new ValueProperty( TYPE, "ImplClass" );</font>
    
Value&lt;JavaTypeName> <font color="#888888">getImplClass();
void setImplClass( String value );
void setImplClass( JavaTypeName value );</font>
</code></pre>
    </td>
    <td>
<pre class="source-code"><code><font color="#888888">@Type( base = JavaTypeName.class )</font>
@Reference( target = JavaType.class )
@JavaTypeConstraint( ... )
<font color="#888888">@MustExist
    
ValueProperty PROP_IMPL_CLASS = new ValueProperty( TYPE, "ImplClass" );</font>
    
ReferenceValue&lt;JavaTypeName,JavaType> <font color="#888888">getImplClass();
void setImplClass( String value );
void setImplClass( JavaTypeName value );</font>
</code></pre>
    </td>
  </tr>
</table>

<h2><a name="html">HTML Content Presentation</a></h2>

<p>Support for presenting HTML content in Sapphire UI was introduced in the 0.2 release in
the form of @HtmlContent annotation and a read-only property editor. This approach proved
to be too inflexible and has been replaced with a dedicated HTML UI part that can display
HTML content that's statically specified, drawn from the model or even fetched remotely.</p>

<table>
  <tr>
    <th>Before</th>
    <th>After</th>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code>@HtmlContent</code></pre>
    </td>
    <td>
<pre class="source-code"><code><i>remove</i></code></pre>
    </td>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code>&lt;property-editor>
  &lt;property>MessageBody&lt;/property>
  &lt;hint>
    &lt;name>show.label&lt;/name>
    &lt;value>false&lt;/value>
  &lt;/hint>
&lt;/property-editor></code></pre>
    </td>
    <td>
<pre class="source-code"><code>&lt;html>
  &lt;content>${ MessageBody }&lt;/content>
  &lt;show-border/>
&lt;/html></code></pre>
    </td>
  </tr>
</table>

<p><a href="index.html#html">See New Feature Documentation</a></p>

<h2><a name="related-content">Related Content</a></h2>

<p>The ability to augment a property editor with an auxiliary property editor has been generalized
into a more powerful related content feature.</p>

<table>
  <tr>
    <th>Before</th>
    <th>After</th>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code><font color="#888888">&lt;property-editor>
  &lt;property>MainProperty&lt;/property></font>
  &lt;aux-property-editor>RelatedProperty&lt;/aux-property-editor>
<font color="#888888">&lt;/property-editor></font></code></pre>
    </td>
    <td>
<pre class="source-code"><code><font color="#888888">&lt;property-editor>
  &lt;property>MainProperty&lt;/property></font>
  &lt;related-content>
    &lt;property-editor>RelatedProperty&lt;/property-editor>
  &lt;/related-content>
<font color="#888888">&lt;/property-editor></font></code></pre>
    </td>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code><font color="#888888">&lt;property-editor>
  &lt;property>MainProperty&lt;/property></font>
  &lt;aux-property-editor>RelatedProperty1&lt;/aux-property-editor>
  &lt;aux-property-editor>RelatedProperty2&lt;/aux-property-editor>
<font color="#888888">&lt;/property-editor></font></code></pre>
    </td>
    <td>
<pre class="source-code"><code><font color="#888888">&lt;property-editor>
  &lt;property>MainProperty&lt;/property></font>
  &lt;related-content>
    &lt;property-editor>
      &lt;property>RelatedProperty1&lt;/property>
      &lt;related-content>
        &lt;property>RelatedProperty2&lt;/property>
      &lt;/related-content>
    &lt;/property-editor>
  &lt;/related-content>
<font color="#888888">&lt;/property-editor></font></code></pre>
    </td>
  </tr>
</table>

<p><a href="index.html#related-content">See New Feature Documentation</a></p>

<h2><a name="composite-ref">Composite Reference</a></h2>

<p>The composite-ref construct has been replaced with a more flexible include construct which allows
any form part to be included.</p>

<table>
  <tr>
    <th>Before</th>
    <th>After</th>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code>&lt;composite-ref>
  &lt;id>bug.report&lt;/id>
&lt;/composite-ref></code></pre>
    </td>
    <td>
<pre class="source-code"><code>&lt;include>bug.report&lt;/include></code></pre>
    </td>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code>&lt;composite-ref>
  &lt;id>bug.report&lt;/id>
  &lt;param>
    &lt;name>SomeParam&lt;/name>
    &lt;value>SomeValue&lt;/value>
  &lt;/param>
&lt;/composite-ref></code></pre>
    </td>
    <td>
<pre class="source-code"><code>&lt;include>
  &lt;part>bug.report&lt;/part>
  &lt;param>
    &lt;name>SomeParam&lt;/name>
    &lt;value>SomeValue&lt;/value>
  &lt;/param>
&lt;/include></code></pre>
    </td>
  </tr>
</table>

<p>The following Eclipse search/replace regular expression can be used to perform this
migration (only works when there are no params):</p>

<p style="margin-left: 20px;"><code>Scope: &nbsp;&nbsp;&nbsp;*.sdef<br/>
<nobr>Search: &nbsp;&nbsp;(?s)&lt;composite-ref>.*?&lt;id>(.*?)&lt;/id>.*?&lt;/composite-ref></nobr><br/>
<nobr>Replace: &nbsp;&lt;include>\1&lt;/include></nobr></p>

<h2><a name="section-description">Section Description</a></h2>

<p>The description construct under section has been removed. Use label and spacer to achieve the same result.</p>

<table>
  <tr>
    <th>Before</th>
    <th>After</th>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code>&lt;section>
  &lt;description>description&lt;/description></id>
&lt;/section></code></pre>
    </td>
    <td>
<pre class="source-code"><code>&lt;section>
  &lt;content>
    &lt;label>description&lt;/label>
    &lt;spacer/>
  &lt;/content>
&lt;/section></code></pre>
    </td>
  </tr>
</table>

<h2><a name="function">Function Name Method</a></h2>

<p>Implementations of custom expression language functions (classes that extend Function) need to be updated
to implement the required new name method. The returned name should be consistent with the name used when
registering the function in sapphire-extension.xml file. The new method is used during toString() execution
on a parsed expression.</p>

<table>
  <tr>
    <th>Before</th>
    <th>After</th>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code>public class CustomFunction extends Function
{
    @Override
    public FunctionResult evaluate( FunctionContext context )
    {
        ...
    }
}</code></pre>
    </td>
    <td>
<pre class="source-code"><code>public class CustomFunction extends Function
{
    @Override
    public String name()
    {
        return "Custom";
    }

    @Override
    public FunctionResult evaluate( FunctionContext context )
    {
        ...
    }
}</code></pre>
    </td>
  </tr>
</table>

<h2><a name="with">With Directive</a></h2>

<p>The with directive capabilities have been expanded to allow ancestor element access via a path. To
accommodate this feature, the "property" XML element in the sdef syntax has been renamed to "path".</p>

<table>
  <tr>
    <th>Before</th>
    <th>After</th>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code><font color="#888888">&lt;with></font>
    &lt;property><font color="#888888">SomeProperty</font>&lt;/property>
    <font color="#888888">&lt;default-panel>
        &lt;content>
            ...
        &lt;/content>
    &lt;/default-panel>
&lt;/with></font></code></pre>
    </td>
    <td>
<pre class="source-code"><code><font color="#888888">&lt;with></font>
    &lt;path><font color="#888888">SomeProperty</font>&lt;/path>
    <font color="#888888">&lt;default-panel>
        &lt;content>
            ...
        &lt;/content>
    &lt;/default-panel>
&lt;/with></font></code></pre>
    </td>
  </tr>
</table>

<p>The following Eclipse search/replace regular expression can be used to perform this
migration:</p>

<p style="margin-left: 20px;"><code>Scope: &nbsp;&nbsp;&nbsp;*.sdef<br/>
<nobr>Search: &nbsp;&nbsp;(?s)&lt;with>(.*?)&lt;property>(.*?)&lt;/property>(.*?)&lt;/with></nobr><br/>
<nobr>Replace: &nbsp;&lt;with>\1&lt;path>\2&lt;/path>\3&lt;/with></nobr></p>

<h2><a name="element-image">Model Element Image</a></h2>

<p>The API for model element image provider has been changed to unify it with the model element services
API and to support notification of image changes.</p>

<table>
  <tr>
    <th>Before</th>
    <th>After</th>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code><font color="#888888">@Image( </font>small<font color="#888888"> = "..." )</font></code></pre>
    </td>
    <td>
<pre class="source-code"><code><font color="#888888">@Image( </font>path<font color="#888888"> = "..." )</font></code></pre>
    </td>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code>@Image( provider = AttendeeImageProvider.class )

public interface IAttendee extends IModelElement
{
    ...
}

...

public class AttendeeImageProvider extends ImageProvider
{
    private static final String IMG_PERSON 
        = SapphireSamplesPlugin.PLUGIN_ID + "/images/person.png";

    private static final String IMG_PERSON_FADED 
        = SapphireSamplesPlugin.PLUGIN_ID + "/images/person-faded.png";

    @Override
    public String getSmallImagePath( IModelElement element )
    {
        if( ( (IAttendee) element ).isInContactsDatabase().getContent() )
        {
            return IMG_PERSON;
        }
        else
        {
            return IMG_PERSON_FADED;
        }
    }

    @Override
    public String getSmallImagePath( ModelElementType type )
    {
        return IMG_PERSON;
    }
}</code></pre>
    </td>
    <td>
<pre class="source-code"><code>@Image( path = "org.eclipse.sapphire.samples/images/person.png" )
@Service( impl = AttendeeImageService.class )

public interface IAttendee extends IModelElement
{
    ...
}

...

public class AttendeeImageService extends ImageService
{
    private static final ImageData IMG_PERSON 
        = ImageData.readFromBundle( SapphireSamplesPlugin.PLUGIN_ID, "images/person.png" );

    private static final ImageData IMG_PERSON_FADED 
        = ImageData.readFromBundle( SapphireSamplesPlugin.PLUGIN_ID, "images/person-faded.png" );
    
    private ModelPropertyListener listener;
    
    @Override
    public void init( IModelElement element, String[] params )
    {
        super.init( element, params );
        
        this.listener = new ModelPropertyListener()
        {
            @Override
            public void handlePropertyChangedEvent( final ModelPropertyChangeEvent event )
            {
                notifyListeners( new ImageChangedEvent( AttendeeImageProviderService.this ) );
            }
        };
        
        element.addListener( this.listener, IAttendee.PROP_IN_CONTACTS_DATABASE.getName() );
    }

    @Override
    public ImageData provide()
    {
        if( ( (IAttendee) element() ).isInContactsDatabase().getContent() )
        {
            return IMG_PERSON;
        }
        else
        {
            return IMG_PERSON_FADED;
        }
    }

    @Override
    public void dispose()
    {
        super.dispose();
        element().removeListener( this.listener, IAttendee.PROP_IN_CONTACTS_DATABASE.getName() );
    }
}</code></pre>
    </td>
  </tr>
</table>

<p>The following Eclipse search/replace regular expression can be used to perform some of this
migration:</p>

<p style="margin-left: 20px;"><code>Scope: &nbsp;&nbsp;&nbsp;*.java<br/>
<nobr>Search: &nbsp;&nbsp;(?s)@Image\((.*?)small(.*?)=(.*?)"(.*?)"(.*?)\)</nobr><br/>
<nobr>Replace: &nbsp;@Image\(\1path\2=\3"\4"\5\)</nobr></p>

<h2><a name="required-annotation">Required Annotation</a></h2>

<p>The NonNullValue annotation has been renamed to Required to better reflect its broader usage
with both value and element properties.</p>

<table>
  <tr>
    <th>Before</th>
    <th>After</th>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code>@NonNullValue

<font color="#888888">ValueProperty PROP_NAME = new ValueProperty( TYPE, "Name" );

Value<String> getName();
void setName( String name );</font></code></pre>
    </td>
    <td>
<pre class="source-code"><code>@Required

<font color="#888888">ValueProperty PROP_NAME = new ValueProperty( TYPE, "Name" );

Value<String> getName();
void setName( String name );</font></code></pre>
    </td>
  </tr>
</table>

<p>The following Eclipse search/replace regular expressions can be used to perform this
migration:</p>

<p style="margin-left: 20px;"><code>Scope: &nbsp;&nbsp;&nbsp;*.java<br/>
<nobr>Search: &nbsp;&nbsp;(?s)@NonNullValue</nobr><br/>
<nobr>Replace: &nbsp;@Required</nobr></p>

<p style="margin-left: 20px;"><code>Scope: &nbsp;&nbsp;&nbsp;*.java<br/>
<nobr>Search: &nbsp;&nbsp;(?s)import org\.eclipse\.sapphire\.modeling\.annotations\.NonNullValue;</nobr><br/>
<nobr>Replace: &nbsp;import org\.eclipse\.sapphire\.modeling\.annotations\.Required;</nobr></p>

<h2><a name="master-details-content-node-factory">Master Details Content Node Factory</a></h2>

<p>The syntax of master details content node factory has been modified to better reflect its
broader usage with both list and element properties.</p>

<table>
  <tr>
    <th>Before</th>
    <th>After</th>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code>&lt;node-list>
    <font color="#888888">&lt;property>HeterogeneousList&lt;/property></font>
    &lt;node-template>
        <font color="#888888">&lt;model-element-type>IChildElementWithInteger&lt;/model-element-type>
        &lt;label>${ StringValue == null ? "&amp;lt;child-with-integer&amp;gt;" : StringValue }&lt;/label>
        &lt;section>
            &lt;label>child element with integer&lt;/label>
            &lt;content>
                &lt;property-editor>StringValue&lt;/property-editor>
                &lt;property-editor>IntegerValue&lt;/property-editor>
            &lt;/content>
        &lt;/section></font>
    &lt;/node-template>
    &lt;node-template>
        <font color="#888888">&lt;model-element-type>IChildElementWithEnum&lt;/model-element-type>
        &lt;label>${ StringValue == null ? "&amp;lt;child-with-enum&amp;gt;" : StringValue }&lt;/label>
        &lt;section>
            &lt;label>child element with enum&lt;/label>
            &lt;content>
                &lt;property-editor>StringValue&lt;/property-editor>
                &lt;property-editor>EnumValue&lt;/property-editor>
            &lt;/content>
        &lt;/section></font>
    &lt;/node-template>
    &lt;node-template>
        <font color="#888888">&lt;model-element-type>IChildElement&lt;/model-element-type>
        &lt;label>${ StringValue == null ? "&amp;lt;child&amp;gt;" : StringValue }&lt;/label>
        &lt;section>
            &lt;label>child element&lt;/label>
            &lt;content>
                &lt;property-editor>StringValue&lt;/property-editor>
            &lt;/content>
        &lt;/section></font>
    &lt;/node-template>
&lt;/node-list></code></pre>
    </td>
    <td>
<pre class="source-code"><code>&lt;node-factory>
    <font color="#888888">&lt;property>HeterogeneousList&lt;/property></font>
    &lt;case>
        <font color="#888888">&lt;model-element-type>IChildElementWithInteger&lt;/model-element-type>
        &lt;label>${ StringValue == null ? "&amp;lt;child-with-integer&amp;gt;" : StringValue }&lt;/label>
        &lt;section>
            &lt;label>child element with integer&lt;/label>
            &lt;content>
                &lt;property-editor>StringValue&lt;/property-editor>
                &lt;property-editor>IntegerValue&lt;/property-editor>
            &lt;/content>
        &lt;/section></font>
    &lt;/case>
    &lt;case>
        <font color="#888888">&lt;model-element-type>IChildElementWithEnum&lt;/model-element-type>
        &lt;label>${ StringValue == null ? "&amp;lt;child-with-enum&amp;gt;" : StringValue }&lt;/label>
        &lt;section>
            &lt;label>child element with enum&lt;/label>
            &lt;content>
                &lt;property-editor>StringValue&lt;/property-editor>
                &lt;property-editor>EnumValue&lt;/property-editor>
            &lt;/content>
        &lt;/section></font>
    &lt;/case>
    &lt;case>
        <font color="#888888">&lt;model-element-type>IChildElement&lt;/model-element-type>
        &lt;label>${ StringValue == null ? "&amp;lt;child&amp;gt;" : StringValue }&lt;/label>
        &lt;section>
            &lt;label>child element&lt;/label>
            &lt;content>
                &lt;property-editor>StringValue&lt;/property-editor>
            &lt;/content>
        &lt;/section></font>
    &lt;/case>
&lt;/node-factory></code></pre>
    </td>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code>&lt;node-ref><font color="#888888">CommonNode</font>&lt;/node-ref></code></pre>
    </td>
    <td>
<pre class="source-code"><code>&lt;node-include><font color="#888888">CommonNode</font>&lt;/node-include></code></pre>
    </td>
  </tr>
  <tr>
    <td>
<pre class="source-code"><code>&lt;node-list-ref><font color="#888888">CommonNodeFactory</font>&lt;/node-list-ref></code></pre>
    </td>
    <td>
<pre class="source-code"><code>&lt;node-include><font color="#888888">CommonNodeFactory</font>&lt;/node-include></code></pre>
    </td>
  </tr>
</table>

<p>The following Eclipse search/replace regular expressions can be used to perform this
migration:</p>

<p style="margin-left: 20px;"><code>Scope: &nbsp;&nbsp;&nbsp;*.sdef<br/>
<nobr>Search: &nbsp;&nbsp;(?s)&lt;node-list></nobr><br/>
<nobr>Replace: &nbsp;&lt;node-factory></nobr></p>

<p style="margin-left: 20px;"><code>Scope: &nbsp;&nbsp;&nbsp;*.sdef<br/>
<nobr>Search: &nbsp;&nbsp;(?s)&lt;/node-list></nobr><br/>
<nobr>Replace: &nbsp;&lt;/node-factory></nobr></p>

<p style="margin-left: 20px;"><code>Scope: &nbsp;&nbsp;&nbsp;*.sdef<br/>
<nobr>Search: &nbsp;&nbsp;(?s)&lt;node-template></nobr><br/>
<nobr>Replace: &nbsp;&lt;case></nobr></p>

<p style="margin-left: 20px;"><code>Scope: &nbsp;&nbsp;&nbsp;*.sdef<br/>
<nobr>Search: &nbsp;&nbsp;(?s)&lt;/node-template></nobr><br/>
<nobr>Replace: &nbsp;&lt;/case></nobr></p>

<p style="margin-left: 20px;"><code>Scope: &nbsp;&nbsp;&nbsp;*.sdef<br/>
<nobr>Search: &nbsp;&nbsp;(?s)&lt;node-ref></nobr><br/>
<nobr>Replace: &nbsp;&lt;node-include></nobr></p>

<p style="margin-left: 20px;"><code>Scope: &nbsp;&nbsp;&nbsp;*.sdef<br/>
<nobr>Search: &nbsp;&nbsp;(?s)&lt;/node-ref></nobr><br/>
<nobr>Replace: &nbsp;&lt;/node-include></nobr></p>

<p style="margin-left: 20px;"><code>Scope: &nbsp;&nbsp;&nbsp;*.sdef<br/>
<nobr>Search: &nbsp;&nbsp;(?s)&lt;node-list-ref></nobr><br/>
<nobr>Replace: &nbsp;&lt;node-include></nobr></p>

<p style="margin-left: 20px;"><code>Scope: &nbsp;&nbsp;&nbsp;*.sdef<br/>
<nobr>Search: &nbsp;&nbsp;(?s)&lt;/node-list-ref></nobr><br/>
<nobr>Replace: &nbsp;&lt;/node-include></nobr></p>

<br/><br/>

</body>

</html>