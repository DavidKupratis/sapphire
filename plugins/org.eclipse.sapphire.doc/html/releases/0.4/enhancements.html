<!-- 
 ******************************************************************************
 * Copyright (c) 2011 Oracle and others
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *
 * Contributors:
 *    Konstantin Komissarchik - initial implementation and ongoing maintenance
 ******************************************************************************
-->

<html>

<head>
  <title>Enhancements in Sapphire 0.4</title>
  <link rel="StyleSheet" href="../../style.css" TYPE="text/css"/>
</head>

<body>

<h1>Enhancements in 0.4</h1>

<ol>
  <li><a href="#Services">Services</a></li>
  <ol type="A">
    <li><a href="#FactsService">FactsService</a></li>
    <li><a href="#PossibleTypesService">PossibleTypesService</a></li>
  </ol>
  <li><a href="#Miscellaneous">Miscellaneous</a></li>
  <ol type="A">
    <a href="#ModelElementTypeWithoutPrefix">Optional 'I' Prefix</a>
  </ol>
</ol>

 
<h2><a name="Services"><a name="FactsService">FactsService</a></a></h2>

<p>When a property is described to a user in documentation one does it with a series of short statements that
define its semantics, such as "must be specified" or "maximum value is 100". When a property is
described to Sapphire one does it with a series of annotations, such as @Required or
@NumericRange. This duplicate specification is a maintenance problem.</p>

<p>A FactsService provides a means to dynamically derive statements about property's semantics
based on property's metadata. The derived facts can then be presented to the user as part of documentation,
property editor information popup and in other relevant places.</p>

<p style="margin-left: 20px;"><img src="images/FactsService.png"/></p>

<p>The concept of deriving facts from metadata has existed in limited capacity in past releases.
New for 0.4 is formalization of this system via FactsService API that allows adopters to participate
in generation of facts on equal footing with the framework. Also new for 0.4 is a much longer list
of annotations that generate corresponding facts.</p>

<p><a href="../../services/index.html#FactsService">See Documentation</a></p>


<h2><a name="PossibleTypesService">PossibleTypesService</a></h2>

<p>The set of possible types for a list or an element property is usually static and as such can be
specified using @Type annotation. However, when the model needs to be extensible or the set of possible
types needs to vary due to runtime conditions, a custom PossibleTypesService implementation can now
be supplied.</p>

<p><a href="../../services/index.html#PossibleTypesService">See Documentation</a></p>


<h2><a name="Miscellaneous"><a name="ModelElementTypeWithoutPrefix">Optional 'I' Prefix</a></a></h2>

<p>Sapphire adopters are no longer required to utilize the convention of prefixing 'I' in front of interface names
when defining model elements. The @GenerateImpl annotation has a new className attribute for explicitly controlling
the implementation class name. The default implementation class name is now defined as follows:</p>

<pre class="source-code"><code>if( using 'I' prefix convention )
{
    default implementation class name is typeClassName.substring( 1 )
}
else
{
    default implementation class name is typeClassName + "Impl"
}</code></pre>

<div class="copyright">Copyright (c) 2011 Oracle and Others<br/>
Content made available under the terms of <a href="http://www.eclipse.org/legal/epl-v10.html">Eclipse Public License</a>.</div>


</body>

</html>